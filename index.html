<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Pathfinding</title>
	<link rel="stylesheet" href="./css/style.css">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
	<header class="header" id="header">
		<button onClick="search()"></button>
		<p style="color: white" id="allBlocks"></p>
	</header>
	<div class="area" id="area"></div>

	<script src="./js/board.js"></script>
	<script src="./js/astar.js"></script>

	<script type='text/javascript'>
		var graph = new Graph(board)
		let doing = false;
		function search() {
			if (!doing) {
				doing = true
				$('.block').removeClass("road");
				$('.block').removeClass("visited");
				var graph = new Graph(board)

				var start = graph.grid[startX][startY];
				var end = graph.grid[endX][endY];

				var result = astar.search(graph, start, end);

				document.getElementById("allBlocks").innerHTML = result.length
				setInterval(()=>{
				console.log(done.a)
				},100)
			}
		}
		function getRoad(){
							for (let i = 0; i < result.length; i++) {
						setTimeout(() => {
							document.querySelector(`.row-${result[i].y} .block-${result[i].x}`).classList.remove("visited")
							document.querySelector(`.row-${result[i].y} .block-${result[i].x}`).classList.add("road")
						}, 30 * i);
					}
					setTimeout(() => {
						doing = false
					}, 50 * result.length);
		}
	</script>

</body>

</html>